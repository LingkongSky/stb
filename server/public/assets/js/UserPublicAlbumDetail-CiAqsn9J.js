import{u as a,b as l,r as e,o as u,e as s,f as i,h as n,k as r,i as v,au as t,m as o,az as d,F as c,x as p,$ as m,av as g,g as f,a7 as _,p as b,v as y,a1 as h,j as k,aw as w,a2 as I,I as j,a4 as x}from"./vendor-DLaggKmm.js";import{_ as z,u as $,i as C}from"./index-B0llsXYu.js";const U={class:"public-album-detail"},A={class:"card-title"},D={key:1,class:"image-grid"},F={class:"image-tags"},P={key:0,class:"pagination"},q=z({__name:"UserPublicAlbumDetail",setup(z){const q=a(),B=l(),E=$(),G=e(null),H=e(null),J=e(null),K=e(null),L=e([]),M=e(!1),N=e(!1),O=e(1),Q=e(20),R=e(0),S=async a=>{var l;N.value=!0,L.value=[],R.value=0;try{const{data:l}=await C.post(`/api/public/albums/${a}/images`,x.stringify({page:O.value,limit:Q.value}));L.value=l.images,R.value=l.total,K.value=l.album}catch({response:e}){j.error(null==(l=null==e?void 0:e.data)?void 0:l.error)}finally{N.value=!1}},T=a=>{O.value=a,S(H.value)};return u((()=>{G.value=q.params.userId,H.value=q.params.albumId,O.value=1,(async a=>{var l;try{const{data:l}=await C.post(`/api/public/users/${a}`);J.value=l}catch({response:e}){j.error(null==(l=null==e?void 0:e.data)?void 0:l.error)}})(G.value),S(H.value)})),(a,l)=>{const e=I,u=d,j=h,x=_,z=g,$=m,C=t,q=w;return i(),s("div",U,[n($,null,{title:r((()=>{var a,u,s,i,v;return[f("div",A,[f("span",null,y((null==(a=J.value)?void 0:a.username)===(null==(s=null==(u=k(E))?void 0:u.user)?void 0:s.username)?"我":null==(i=J.value)?void 0:i.username)+"的相册："+y(null==(v=K.value)?void 0:v.name),1),n(e,{onClick:l[0]||(l[0]=a=>k(B).go(-1))},{default:r((()=>l[2]||(l[2]=[b("返回")]))),_:1,__:[2]})])]})),default:r((()=>[n(C,{spinning:M.value||N.value},{default:r((()=>[0!==L.value.length||N.value?(i(),s("div",D,[(i(!0),s(c,null,p(L.value,(a=>(i(),s("div",{key:a._id,class:"image-item"},[n($,{hoverable:""},{cover:r((()=>{var l,e,u,s,i,r;return[n(j,{src:(null==(u=null==(e=null==(l=k(E))?void 0:l.config)?void 0:e.site)?void 0:u.url)+a.thumb,preview:{src:(null==(r=null==(i=null==(s=k(E))?void 0:s.config)?void 0:i.site)?void 0:r.url)+a.url}},null,8,["src","preview"])]})),default:r((()=>[n(z,null,{title:r((()=>[b(y(a.filename),1)])),description:r((()=>[f("div",F,[(i(!0),s(c,null,p(a.tags,(a=>(i(),o(x,{key:a},{default:r((()=>[b(y(a),1)])),_:2},1024)))),128))])])),_:2},1024)])),_:2},1024)])))),128))])):(i(),o(u,{key:0,description:"暂无图片"}))])),_:1},8,["spinning"]),R.value>Q.value?(i(),s("div",P,[n(q,{current:O.value,"onUpdate:current":l[1]||(l[1]=a=>O.value=a),total:R.value,"page-size":Q.value,onChange:T},null,8,["current","total","page-size"])])):v("",!0)])),_:1})])}}},[["__scopeId","data-v-e22ee9f7"]]);export{q as default};
