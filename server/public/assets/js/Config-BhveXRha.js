import{_ as e,u as l,i as a}from"./index-CJP2_w2Y.js";import{i as u}from"./formatDate-DJT1dS-E.js";import{r as t,w as d,o as r,e as o,h as v,k as n,I as s,au as c,f as i,am as p,V as h,W as g,m as b,i as f,an as _,ao as k,aR as y,aU as U,g as m,a0 as q,F as S,x as I,ax as K,p as w,v as P,ap as T,j as x,aW as A,aX as D,aT as C,a2 as B}from"./vendor-DLaggKmm.js";const G={class:"config-container"},R=e({__name:"Config",setup(e){const R=l(),j=t(!1),M=t(!1),H=t(""),F=t("1"),O=Object.entries(u).filter((([e])=>"get"!==e)).map((([e,l])=>({value:e,label:l}))),E=[{value:"home",label:"图床首页"},{value:"my",label:"我的图片"},{value:"gallery",label:"图片广场"},{value:"docs",label:"接口文档"}],L=t({site:{},storage:{},watermark:{},ip:{},ai:{},oauth:{}}),N=e=>{const{ip:l}=L.value;l.blacklist=e.target.value.split("\n").map((e=>e.trim())).filter((e=>e))},z=async()=>{var e;M.value=!0;try{const{data:e}=await a.put("/api/admin/config",L.value),{site:l,ai:u,oauth:t}=L.value;R.config=JSON.parse(JSON.stringify({site:l,ai:{enabled:u.enabled},oauth:{enabled:t.enabled,github:{enabled:t.github.enabled},google:{enabled:t.google.enabled},linuxdo:{enabled:t.linuxdo.enabled}}})),s.success(e.message)}catch({response:l}){s.error(null==(e=null==l?void 0:l.data)?void 0:e.error)}finally{M.value=!1}};return d((()=>F.value),(e=>{R.activeKey=e||"1"})),r((()=>{F.value=R.activeKey||"1",(async()=>{var e;j.value=!0;try{const{data:e}=await a.post("/api/admin/config"),{ip:l}=e;L.value=e,H.value=l.blacklist.join("\n")}catch({response:l}){s.error(null==(e=null==l?void 0:l.data)?void 0:e.error)}finally{j.value=!1}})()})),(e,l)=>{const a=k,u=_,t=y,d=U,r=K,s=q,R=g,$=T,J=D,W=A,Y=C,V=h,X=B,Q=p,Z=c;return i(),o("div",G,[v(Z,{spinning:j.value},{default:n((()=>[v(Q,{model:L.value,layout:"vertical",onFinish:z},{default:n((()=>[v(V,{activeKey:F.value,"onUpdate:activeKey":l[130]||(l[130]=e=>F.value=e),accordion:"",bordered:!1,style:{background:"#f0f2f5"}},{default:n((()=>[v(R,{key:"1",header:"站点设置"},{default:n((()=>[v(u,{required:"",label:"网站标题"},{default:n((()=>[v(a,{value:L.value.site.title,"onUpdate:value":l[0]||(l[0]=e=>L.value.site.title=e)},null,8,["value"])])),_:1}),v(u,{required:"",label:"网站URL"},{default:n((()=>[v(a,{value:L.value.site.url,"onUpdate:value":l[1]||(l[1]=e=>L.value.site.url=e)},null,8,["value"])])),_:1}),v(u,{label:"备案号"},{default:n((()=>[v(a,{value:L.value.site.beian,"onUpdate:value":l[2]||(l[2]=e=>L.value.site.beian=e)},null,8,["value"])])),_:1}),v(u,{label:"HTML代码"},{default:n((()=>[v(t,{value:L.value.site.html,"onUpdate:value":l[3]||(l[3]=e=>L.value.site.html=e),placeholder:"支持HTML标签, 支持<style>标签, 支持<script>标签","auto-size":{minRows:5}},null,8,["value"])])),_:1}),v(u,{label:"是否开启验证码"},{default:n((()=>[v(d,{checked:L.value.site.captcha,"onUpdate:checked":l[4]||(l[4]=e=>L.value.site.captcha=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),v(u,{label:"是否开启API接口文档页面"},{default:n((()=>[v(d,{checked:L.value.site.api,"onUpdate:checked":l[5]||(l[5]=e=>L.value.site.api=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),v(u,{label:"是否开启图片广场页面"},{default:n((()=>[v(d,{checked:L.value.site.gallery,"onUpdate:checked":l[6]||(l[6]=e=>L.value.site.gallery=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),v(u,{label:"是否开启游客上传"},{default:n((()=>[v(d,{checked:L.value.site.anonymousUpload,"onUpdate:checked":l[7]||(l[7]=e=>L.value.site.anonymousUpload=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),v(u,{label:"是否开启注册"},{default:n((()=>[v(d,{checked:L.value.site.register,"onUpdate:checked":l[8]||(l[8]=e=>L.value.site.register=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),L.value.site.register?(i(),b(u,{key:0,label:"是否开启邀请码注册"},{default:n((()=>[v(d,{checked:L.value.site.inviteCodeRequired,"onUpdate:checked":l[9]||(l[9]=e=>L.value.site.inviteCodeRequired=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1})):f("",!0),v(u,{label:"导航栏顺序"},{default:n((()=>[v(s,{value:L.value.site.navigationOrder,"onUpdate:value":l[10]||(l[10]=e=>L.value.site.navigationOrder=e),mode:"multiple",placeholder:"选择导航项",style:{width:"100%"}},{default:n((()=>[(i(),o(S,null,I(E,(e=>v(r,{key:e.value,value:e.value},{default:n((()=>[w(P(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"]),l[131]||(l[131]=m("p",null,"注意: 修改该设置后访问网站根目录时会自动重定向到该设置的第一项",-1))])),_:1,__:[131]}),v(u,{label:"是否开启随机图片"},{default:n((()=>[v(d,{checked:L.value.site.random,"onUpdate:checked":l[11]||(l[11]=e=>L.value.site.random=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),L.value.site.random?(i(),o(S,{key:1},[v(u,{required:"",label:"用作展示随机图片的相册ID"},{default:n((()=>[v(a,{value:L.value.site.randId,"onUpdate:value":l[12]||(l[12]=e=>L.value.site.randId=e)},null,8,["value"])])),_:1}),v(u,{label:"随机图片API"},{default:n((()=>[v(a,{disabled:"",value:`${L.value.site.url}/api/randImage`},null,8,["value"])])),_:1})],64)):f("",!0)])),_:1}),v(R,{key:"2",header:"SMTP设置"},{default:n((()=>[L.value.site.register?(i(),o(S,{key:0},[v(u,{label:"是否开启邮箱验证"},{default:n((()=>[v(d,{checked:L.value.smtp.enabled,"onUpdate:checked":l[13]||(l[13]=e=>L.value.smtp.enabled=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),L.value.smtp.enabled?(i(),o(S,{key:0},[v(u,{required:"",label:"发件人邮箱地址"},{default:n((()=>[v(a,{value:L.value.smtp.from,"onUpdate:value":l[14]||(l[14]=e=>L.value.smtp.from=e),placeholder:"输入发件人邮箱地址"},null,8,["value"])])),_:1}),v(u,{required:"",label:"发件人名称"},{default:n((()=>[v(a,{value:L.value.smtp.fromName,"onUpdate:value":l[15]||(l[15]=e=>L.value.smtp.fromName=e),placeholder:"输入发件人名称"},null,8,["value"])])),_:1}),v(u,{required:"",label:"SMTP 服务器地址"},{default:n((()=>[v(a,{value:L.value.smtp.host,"onUpdate:value":l[16]||(l[16]=e=>L.value.smtp.host=e),placeholder:"输入 SMTP 服务器地址，例如：smtp.qiye.aliyun.com"},null,8,["value"])])),_:1}),v(u,{required:"",label:"SMTP 服务器端口"},{default:n((()=>[v(a,{value:L.value.smtp.port,"onUpdate:value":l[17]||(l[17]=e=>L.value.smtp.port=e),placeholder:"输入 SMTP 服务器端口，例如：465"},null,8,["value"])])),_:1}),v(u,{required:"",label:"SMTP 加密方式"},{default:n((()=>[v(s,{value:L.value.smtp.secure,"onUpdate:value":l[18]||(l[18]=e=>L.value.smtp.secure=e)},{default:n((()=>[v(r,{value:"none"},{default:n((()=>l[132]||(l[132]=[w("无")]))),_:1,__:[132]}),v(r,{value:"ssl"},{default:n((()=>l[133]||(l[133]=[w("SSL")]))),_:1,__:[133]}),v(r,{value:"tls"},{default:n((()=>l[134]||(l[134]=[w("TLS")]))),_:1,__:[134]})])),_:1},8,["value"])])),_:1}),v(u,{required:"",label:"SMTP 用户名"},{default:n((()=>[v(a,{value:L.value.smtp.username,"onUpdate:value":l[19]||(l[19]=e=>L.value.smtp.username=e),placeholder:"输入 SMTP 用户名"},null,8,["value"])])),_:1}),v(u,{required:"",label:"SMTP 密码"},{default:n((()=>[v($,{value:L.value.smtp.password,"onUpdate:value":l[20]||(l[20]=e=>L.value.smtp.password=e),placeholder:"输入 SMTP 密码"},null,8,["value"])])),_:1})],64)):f("",!0)],64)):f("",!0)])),_:1}),v(R,{key:"3",header:"存储设置"},{default:n((()=>[v(u,{label:"存储类型"},{default:n((()=>[v(s,{value:L.value.storage.type,"onUpdate:value":l[21]||(l[21]=e=>L.value.storage.type=e)},{default:n((()=>[(i(!0),o(S,null,I(x(O),((e,l)=>(i(),b(r,{value:e.value,key:l},{default:n((()=>[w(P(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),"local"===L.value.storage.type?(i(),b(u,{key:0,required:"",label:"储存目录"},{default:n((()=>[v(a,{value:L.value.storage.local.path,"onUpdate:value":l[22]||(l[22]=e=>L.value.storage.local.path=e),placeholder:"输入储存目录"},null,8,["value"]),l[135]||(l[135]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[135]})):f("",!0),"oss"===L.value.storage.type?(i(),o(S,{key:1},[v(u,{required:"",label:"AccessKey ID"},{default:n((()=>[v(a,{value:L.value.storage.oss.accessKeyId,"onUpdate:value":l[23]||(l[23]=e=>L.value.storage.oss.accessKeyId=e),placeholder:"输入 AccessKeyId"},null,8,["value"])])),_:1}),v(u,{required:"",label:"AccessKey Secret"},{default:n((()=>[v($,{value:L.value.storage.oss.accessKeySecret,"onUpdate:value":l[24]||(l[24]=e=>L.value.storage.oss.accessKeySecret=e),placeholder:"输入 AccessKeySecret"},null,8,["value"])])),_:1}),v(u,{required:"",label:"OSS Bucket"},{default:n((()=>[v(a,{value:L.value.storage.oss.bucket,"onUpdate:value":l[25]||(l[25]=e=>L.value.storage.oss.bucket=e)},null,8,["value"])])),_:1}),v(u,{label:"储存目录"},{default:n((()=>[v(a,{value:L.value.storage.oss.path,"onUpdate:value":l[26]||(l[26]=e=>L.value.storage.oss.path=e),placeholder:"输入储存目录"},null,8,["value"]),l[136]||(l[136]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[136]}),v(u,{label:"OSS Region"},{default:n((()=>[v(a,{value:L.value.storage.oss.region,"onUpdate:value":l[27]||(l[27]=e=>L.value.storage.oss.region=e),placeholder:"输入 Region，例如：cn-shanghai"},null,8,["value"])])),_:1}),v(u,{required:"",label:"外网 Endpoint"},{default:n((()=>[v(a,{value:L.value.storage.oss.endpoint,"onUpdate:value":l[28]||(l[28]=e=>L.value.storage.oss.endpoint=e),placeholder:"输入 Endpoint，例如：oss-cn-shanghai.aliyuncs.com"},null,8,["value"])])),_:1}),v(u,{label:"内网 Endpoint"},{default:n((()=>[v(a,{value:L.value.storage.oss.internal,"onUpdate:value":l[29]||(l[29]=e=>L.value.storage.oss.internal=e),placeholder:"输入内网 Endpoint，内网上传地址，填写即启用，例如：oss-cn-shanghai-internal.aliyuncs.com"},null,8,["value"])])),_:1}),v(u,{label:"Is Cname"},{default:n((()=>[v(d,{checked:L.value.storage.oss.isCname,"onUpdate:checked":l[30]||(l[30]=e=>L.value.storage.oss.isCname=e),"checked-children":"是","un-checked-children":"否"},null,8,["checked"]),l[137]||(l[137]=m("p",null,"若 Endpoint 为自定义域名，请打开此项。",-1))])),_:1,__:[137]})],64)):f("",!0),"cos"===L.value.storage.type?(i(),o(S,{key:2},[v(u,{required:"",label:"Secret Id"},{default:n((()=>[v(a,{value:L.value.storage.cos.secretId,"onUpdate:value":l[31]||(l[31]=e=>L.value.storage.cos.secretId=e),placeholder:"输入 Secret Id"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Secret Key"},{default:n((()=>[v($,{value:L.value.storage.cos.secretKey,"onUpdate:value":l[32]||(l[32]=e=>L.value.storage.cos.secretKey=e),placeholder:"输入 Secret Key"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Bucket"},{default:n((()=>[v(a,{value:L.value.storage.cos.bucket,"onUpdate:value":l[33]||(l[33]=e=>L.value.storage.cos.bucket=e),placeholder:"输入 Bucket"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Region"},{default:n((()=>[v(a,{value:L.value.storage.cos.region,"onUpdate:value":l[34]||(l[34]=e=>L.value.storage.cos.region=e),placeholder:"输入 Region，例如：ap-guangzhou"},null,8,["value"])])),_:1}),v(u,{required:"",label:"储存目录"},{default:n((()=>[v(a,{value:L.value.storage.cos.filePath,"onUpdate:value":l[35]||(l[35]=e=>L.value.storage.cos.filePath=e),placeholder:"输入储存目录"},null,8,["value"]),l[138]||(l[138]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[138]})],64)):f("",!0),"s3"===L.value.storage.type?(i(),o(S,{key:3},[v(u,{required:"",label:"Endpoint"},{default:n((()=>[v(a,{value:L.value.storage.s3.endpoint,"onUpdate:value":l[36]||(l[36]=e=>L.value.storage.s3.endpoint=e),placeholder:"输入 Endpoint，例如：https://s3.amazonaws.com"},null,8,["value"])])),_:1}),v(u,{required:"",label:"AccessKeyId"},{default:n((()=>[v(a,{value:L.value.storage.s3.accessKeyId,"onUpdate:value":l[37]||(l[37]=e=>L.value.storage.s3.accessKeyId=e),placeholder:"输入 AccessKeyId"},null,8,["value"])])),_:1}),v(u,{required:"",label:"SecretAccessKey"},{default:n((()=>[v($,{value:L.value.storage.s3.secretAccessKey,"onUpdate:value":l[38]||(l[38]=e=>L.value.storage.s3.secretAccessKey=e),placeholder:"输入 SecretAccessKey"},null,8,["value"])])),_:1}),v(u,{label:"Region"},{default:n((()=>[v(a,{value:L.value.storage.s3.region,"onUpdate:value":l[39]||(l[39]=e=>L.value.storage.s3.region=e),placeholder:"输入 Region，例如：us-east-1 或者 auto"},null,8,["value"])])),_:1}),v(u,{label:"Bucket"},{default:n((()=>[v(a,{value:L.value.storage.s3.bucket,"onUpdate:value":l[40]||(l[40]=e=>L.value.storage.s3.bucket=e),placeholder:"输入 Bucket"},null,8,["value"])])),_:1}),v(u,{required:"",label:"存储目录"},{default:n((()=>[v(a,{value:L.value.storage.s3.directory,"onUpdate:value":l[41]||(l[41]=e=>L.value.storage.s3.directory=e),placeholder:"输入储存目录"},null,8,["value"]),l[139]||(l[139]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[139]})],64)):f("",!0),"qiniu"===L.value.storage.type?(i(),o(S,{key:4},[v(u,{required:"",label:"Access Key"},{default:n((()=>[v(a,{value:L.value.storage.qiniu.accessKey,"onUpdate:value":l[42]||(l[42]=e=>L.value.storage.qiniu.accessKey=e),placeholder:"输入 Access Key"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Secret Key"},{default:n((()=>[v($,{value:L.value.storage.qiniu.secretKey,"onUpdate:value":l[43]||(l[43]=e=>L.value.storage.qiniu.secretKey=e),placeholder:"输入 Secret Key"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Bucket"},{default:n((()=>[v(a,{value:L.value.storage.qiniu.bucket,"onUpdate:value":l[44]||(l[44]=e=>L.value.storage.qiniu.bucket=e),placeholder:"输入 Bucket"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Bucket 域名"},{default:n((()=>[v(a,{value:L.value.storage.qiniu.domain,"onUpdate:value":l[45]||(l[45]=e=>L.value.storage.qiniu.domain=e),placeholder:"输入 Bucket 域名"},null,8,["value"])])),_:1}),v(u,{required:"",label:"存储目录"},{default:n((()=>[v(a,{value:L.value.storage.qiniu.directory,"onUpdate:value":l[46]||(l[46]=e=>L.value.storage.qiniu.directory=e),placeholder:"输入储存目录"},null,8,["value"]),l[140]||(l[140]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[140]})],64)):f("",!0),"upyun"===L.value.storage.type?(i(),o(S,{key:5},[v(u,{required:"",label:"又拍云服务名"},{default:n((()=>[v(a,{value:L.value.storage.upyun.service,"onUpdate:value":l[47]||(l[47]=e=>L.value.storage.upyun.service=e),placeholder:"输入服务名"},null,8,["value"])])),_:1}),v(u,{required:"",label:"又拍云操作员"},{default:n((()=>[v(a,{value:L.value.storage.upyun.operator,"onUpdate:value":l[48]||(l[48]=e=>L.value.storage.upyun.operator=e),placeholder:"输入操作员"},null,8,["value"])])),_:1}),v(u,{required:"",label:"又拍云密码"},{default:n((()=>[v($,{value:L.value.storage.upyun.password,"onUpdate:value":l[49]||(l[49]=e=>L.value.storage.upyun.password=e),placeholder:"输入密码"},null,8,["value"])])),_:1}),v(u,{required:"",label:"存储目录"},{default:n((()=>[v(a,{value:L.value.storage.upyun.directory,"onUpdate:value":l[50]||(l[50]=e=>L.value.storage.upyun.directory=e),placeholder:"输入储存目录"},null,8,["value"]),l[141]||(l[141]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[141]}),v(u,{required:"",label:"访问域名"},{default:n((()=>[v(a,{value:L.value.storage.upyun.domain,"onUpdate:value":l[51]||(l[51]=e=>L.value.storage.upyun.domain=e),placeholder:"输入访问域名, 例如: https://domain.com"},null,8,["value"])])),_:1})],64)):f("",!0),"sftp"===L.value.storage.type?(i(),o(S,{key:6},[v(u,{required:"",label:"主机地址",placeholder:"输入主机地址"},{default:n((()=>[v(a,{value:L.value.storage.sftp.host,"onUpdate:value":l[52]||(l[52]=e=>L.value.storage.sftp.host=e)},null,8,["value"])])),_:1}),v(u,{required:"",label:"端口"},{default:n((()=>[v(a,{value:L.value.storage.sftp.port,"onUpdate:value":l[53]||(l[53]=e=>L.value.storage.sftp.port=e),placeholder:"输入端口，默认为 22"},null,8,["value"])])),_:1}),v(u,{required:"",label:"用户名"},{default:n((()=>[v(a,{value:L.value.storage.sftp.username,"onUpdate:value":l[54]||(l[54]=e=>L.value.storage.sftp.username=e),placeholder:"输入用户名"},null,8,["value"])])),_:1}),v(u,{required:"",label:"密码"},{default:n((()=>[v($,{value:L.value.storage.sftp.password,"onUpdate:value":l[55]||(l[55]=e=>L.value.storage.sftp.password=e),placeholder:"输入密码"},null,8,["value"])])),_:1}),v(u,{required:"",label:"储存目录"},{default:n((()=>[v(a,{value:L.value.storage.sftp.directory,"onUpdate:value":l[56]||(l[56]=e=>L.value.storage.sftp.directory=e),placeholder:"输入储存目录"},null,8,["value"]),l[142]||(l[142]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[142]}),v(u,{required:"",label:"连接超时时间"},{default:n((()=>[v(a,{value:L.value.storage.sftp.connectTimeout,"onUpdate:value":l[57]||(l[57]=e=>L.value.storage.sftp.connectTimeout=e),placeholder:"输入连接超时时间，默认为 10 秒"},null,8,["value"])])),_:1}),v(u,{required:"",label:"连接最大尝试次数"},{default:n((()=>[v(a,{value:L.value.storage.sftp.retries,"onUpdate:value":l[58]||(l[58]=e=>L.value.storage.sftp.retries=e),placeholder:"输入连接最大尝试次数，默认为 4 次"},null,8,["value"])])),_:1}),v(u,{required:"",label:"访问域名"},{default:n((()=>[v(a,{value:L.value.storage.sftp.domain,"onUpdate:value":l[59]||(l[59]=e=>L.value.storage.sftp.domain=e),placeholder:"输入访问域名, 例如: https://domain.com"},null,8,["value"])])),_:1}),v(u,{label:"主机指纹"},{default:n((()=>[v($,{value:L.value.storage.sftp.hostFingerprint,"onUpdate:value":l[60]||(l[60]=e=>L.value.storage.sftp.hostFingerprint=e),placeholder:"输入主机指纹"},null,8,["value"])])),_:1}),v(u,{label:"使用 SSH 代理"},{default:n((()=>[v(d,{checked:L.value.storage.sftp.useSSH,"onUpdate:checked":l[61]||(l[61]=e=>L.value.storage.sftp.useSSH=e)},null,8,["checked"])])),_:1}),L.value.storage.sftp.useSSH?(i(),o(S,{key:0},[v(u,{label:"私钥"},{default:n((()=>[v(t,{value:L.value.storage.sftp.privateKey,"onUpdate:value":l[62]||(l[62]=e=>L.value.storage.sftp.privateKey=e),placeholder:"使用私钥连接请输入私钥","auto-size":{minRows:2,maxRows:5}},null,8,["value"])])),_:1}),v(u,{label:"私钥口令"},{default:n((()=>[v($,{value:L.value.storage.sftp.passphrase,"onUpdate:value":l[63]||(l[63]=e=>L.value.storage.sftp.passphrase=e),placeholder:"使用私钥连接请输入私钥口令"},null,8,["value"])])),_:1})],64)):f("",!0)],64)):f("",!0),"ftp"===L.value.storage.type?(i(),o(S,{key:7},[v(u,{required:"",label:"储存目录"},{default:n((()=>[v(a,{value:L.value.storage.ftp.directory,"onUpdate:value":l[64]||(l[64]=e=>L.value.storage.ftp.directory=e),placeholder:"输入储存目录"},null,8,["value"]),l[143]||(l[143]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[143]}),v(u,{required:"",label:"主机地址"},{default:n((()=>[v(a,{value:L.value.storage.ftp.host,"onUpdate:value":l[65]||(l[65]=e=>L.value.storage.ftp.host=e),placeholder:"输入主机地址"},null,8,["value"])])),_:1}),v(u,{required:"",label:"用户名"},{default:n((()=>[v(a,{value:L.value.storage.ftp.username,"onUpdate:value":l[66]||(l[66]=e=>L.value.storage.ftp.username=e),placeholder:"输入用户名"},null,8,["value"])])),_:1}),v(u,{required:"",label:"密码"},{default:n((()=>[v($,{value:L.value.storage.ftp.password,"onUpdate:value":l[67]||(l[67]=e=>L.value.storage.ftp.password=e),placeholder:"输入密码"},null,8,["value"])])),_:1}),v(u,{required:"",label:"端口"},{default:n((()=>[v(a,{value:L.value.storage.ftp.port,"onUpdate:value":l[68]||(l[68]=e=>L.value.storage.ftp.port=e),placeholder:"输入端口，默认为 21"},null,8,["value"])])),_:1}),v(u,{required:"",label:"传输模式"},{default:n((()=>[v(s,{value:L.value.storage.ftp.transferMode,"onUpdate:value":l[69]||(l[69]=e=>L.value.storage.ftp.transferMode=e)},{default:n((()=>[v(r,{value:"binary"},{default:n((()=>l[144]||(l[144]=[w("FTP_BINARY")]))),_:1,__:[144]}),v(r,{value:"ascii"},{default:n((()=>l[145]||(l[145]=[w("FTP_ASCII")]))),_:1,__:[145]})])),_:1},8,["value"]),l[146]||(l[146]=m("p",null,"请选择传输模式，默认为 FTP_BINARY",-1))])),_:1,__:[146]}),v(u,{required:"",label:"连接超时时间"},{default:n((()=>[v(a,{value:L.value.storage.ftp.connectTimeout,"onUpdate:value":l[70]||(l[70]=e=>L.value.storage.ftp.connectTimeout=e),placeholder:"输入连接超时时间，默认为 90 秒"},null,8,["value"])])),_:1}),v(u,{required:"",label:"访问域名"},{default:n((()=>[v(a,{value:L.value.storage.ftp.domain,"onUpdate:value":l[71]||(l[71]=e=>L.value.storage.ftp.domain=e),placeholder:"输入访问域名, 例如: https://domain.com"},null,8,["value"])])),_:1}),v(u,{label:"是否使用被动模式"},{default:n((()=>[v(d,{checked:L.value.storage.ftp.passive,"onUpdate:checked":l[72]||(l[72]=e=>L.value.storage.ftp.passive=e)},null,8,["checked"])])),_:1}),v(u,{label:"是否使用 SSL 连接"},{default:n((()=>[v(d,{checked:L.value.storage.ftp.secure,"onUpdate:checked":l[73]||(l[73]=e=>L.value.storage.ftp.secure=e)},null,8,["checked"])])),_:1}),v(u,{label:"是否忽略被动模式下的远程 IP 地址"},{default:n((()=>[v(d,{checked:L.value.storage.ftp.ignorePassiveIP,"onUpdate:checked":l[74]||(l[74]=e=>L.value.storage.ftp.ignorePassiveIP=e)},null,8,["checked"])])),_:1}),v(u,{label:"是否启用 Unix 时间戳"},{default:n((()=>[v(d,{checked:L.value.storage.ftp.useUnixTimestamp,"onUpdate:checked":l[75]||(l[75]=e=>L.value.storage.ftp.useUnixTimestamp=e)},null,8,["checked"])])),_:1}),v(u,{label:"是否启用 UTF-8 编码"},{default:n((()=>[v(d,{checked:L.value.storage.ftp.useUTF8,"onUpdate:checked":l[76]||(l[76]=e=>L.value.storage.ftp.useUTF8=e)},null,8,["checked"])])),_:1}),v(u,{label:"是否手动递归"},{default:n((()=>[v(d,{checked:L.value.storage.ftp.recursive,"onUpdate:checked":l[77]||(l[77]=e=>L.value.storage.ftp.recursive=e)},null,8,["checked"])])),_:1})],64)):f("",!0),"webdav"===L.value.storage.type?(i(),o(S,{key:8},[v(u,{label:"储存目录"},{default:n((()=>[v(a,{value:L.value.storage.webdav.directory,"onUpdate:value":l[78]||(l[78]=e=>L.value.storage.webdav.directory=e)},null,8,["value"]),l[147]||(l[147]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[147]}),v(u,{required:"",label:"连接地址"},{default:n((()=>[v(a,{value:L.value.storage.webdav.url,"onUpdate:value":l[79]||(l[79]=e=>L.value.storage.webdav.url=e),placeholder:"输入连接地址"},null,8,["value"])])),_:1}),v(u,{required:"",label:"认证方式"},{default:n((()=>[v(s,{value:L.value.storage.webdav.authType,"onUpdate:value":l[80]||(l[80]=e=>L.value.storage.webdav.authType=e)},{default:n((()=>[v(r,{value:"auto"},{default:n((()=>l[148]||(l[148]=[w("Auto")]))),_:1,__:[148]}),v(r,{value:"basic"},{default:n((()=>l[149]||(l[149]=[w("Basic")]))),_:1,__:[149]}),v(r,{value:"digest"},{default:n((()=>l[150]||(l[150]=[w("Digest")]))),_:1,__:[150]}),v(r,{value:"ntlm"},{default:n((()=>l[151]||(l[151]=[w("Ntlm")]))),_:1,__:[151]})])),_:1},8,["value"]),l[152]||(l[152]=m("p",null,"请选择认证方式，默认 Auto",-1))])),_:1,__:[152]}),v(u,{required:"",label:"用户名"},{default:n((()=>[v(a,{value:L.value.storage.webdav.username,"onUpdate:value":l[81]||(l[81]=e=>L.value.storage.webdav.username=e),placeholder:"输入用户名"},null,8,["value"])])),_:1}),v(u,{required:"",label:"密码"},{default:n((()=>[v($,{value:L.value.storage.webdav.password,"onUpdate:value":l[82]||(l[82]=e=>L.value.storage.webdav.password=e),placeholder:"输入密码"},null,8,["value"])])),_:1}),v(u,{required:"",label:"访问域名"},{default:n((()=>[v(a,{value:L.value.storage.webdav.domain,"onUpdate:value":l[83]||(l[83]=e=>L.value.storage.webdav.domain=e),placeholder:"输入访问域名, 例如: https://domain.com"},null,8,["value"])])),_:1})],64)):f("",!0),"telegram"===L.value.storage.type?(i(),o(S,{key:9},[v(u,{required:"",label:"BotToken"},{default:n((()=>[v($,{value:L.value.storage.telegram.botToken,"onUpdate:value":l[84]||(l[84]=e=>L.value.storage.telegram.botToken=e),placeholder:"输入 BotToken"},null,8,["value"])])),_:1}),v(u,{required:"",label:"聊天ID"},{default:n((()=>[v(a,{value:L.value.storage.telegram.chatId,"onUpdate:value":l[85]||(l[85]=e=>L.value.storage.telegram.chatId=e),placeholder:"输入聊天ID"},null,8,["value"])])),_:1}),v(u,{required:"",label:"频道ID"},{default:n((()=>[v(a,{value:L.value.storage.telegram.channelId,"onUpdate:value":l[86]||(l[86]=e=>L.value.storage.telegram.channelId=e),placeholder:"输入频道ID"},null,8,["value"])])),_:1}),v(u,{label:"禁用轮询"},{default:n((()=>[v(d,{checked:L.value.storage.telegram.polling,"onUpdate:checked":l[87]||(l[87]=e=>L.value.storage.telegram.polling=e)},null,8,["checked"])])),_:1}),v(u,{label:"连接超时时间"},{default:n((()=>[v(a,{value:L.value.storage.telegram.timeout,"onUpdate:value":l[88]||(l[88]=e=>L.value.storage.telegram.timeout=e),placeholder:"输入连接超时时间，默认为 30 秒"},null,8,["value"])])),_:1}),v(u,{label:"代理地址"},{default:n((()=>[v(a,{value:L.value.storage.telegram.proxy,"onUpdate:value":l[89]||(l[89]=e=>L.value.storage.telegram.proxy=e),placeholder:"输入代理地址"},null,8,["value"])])),_:1})],64)):f("",!0),"github"===L.value.storage.type?(i(),o(S,{key:10},[v(u,{required:"",label:"GitHub 个人访问令牌"},{default:n((()=>[v($,{value:L.value.storage.github.token,"onUpdate:value":l[90]||(l[90]=e=>L.value.storage.github.token=e),placeholder:"输入 GitHub 个人访问令牌"},null,8,["value"])])),_:1}),v(u,{required:"",label:"仓库所有者"},{default:n((()=>[v(a,{value:L.value.storage.github.owner,"onUpdate:value":l[91]||(l[91]=e=>L.value.storage.github.owner=e),placeholder:"输入仓库所有者"},null,8,["value"])])),_:1}),v(u,{required:"",label:"仓库名称"},{default:n((()=>[v(a,{value:L.value.storage.github.repo,"onUpdate:value":l[92]||(l[92]=e=>L.value.storage.github.repo=e),placeholder:"输入仓库名称"},null,8,["value"])])),_:1}),v(u,{required:"",label:"分支名称"},{default:n((()=>[v(a,{value:L.value.storage.github.branch,"onUpdate:value":l[93]||(l[93]=e=>L.value.storage.github.branch=e),placeholder:"输入分支名称"},null,8,["value"])])),_:1}),v(u,{required:"",label:"存储目录"},{default:n((()=>[v(a,{value:L.value.storage.github.directory,"onUpdate:value":l[94]||(l[94]=e=>L.value.storage.github.directory=e),placeholder:"输入存储目录"},null,8,["value"]),l[153]||(l[153]=m("p",null,'Github不允许文件路径以斜杠"/"开头',-1)),l[154]||(l[154]=m("p",null,'不能以"/"或"\\"结尾',-1))])),_:1,__:[153,154]}),v(u,{required:"",label:"连接超时时间"},{default:n((()=>[v(a,{value:L.value.storage.github.timeout,"onUpdate:value":l[95]||(l[95]=e=>L.value.storage.github.timeout=e),placeholder:"输入连接超时时间，默认为 30 秒"},null,8,["value"])])),_:1}),v(u,{required:"",label:"重试次数"},{default:n((()=>[v(a,{value:L.value.storage.github.retries,"onUpdate:value":l[96]||(l[96]=e=>L.value.storage.github.retries=e),placeholder:"输入重试次数，默认为 3 次"},null,8,["value"])])),_:1}),v(u,{required:"",label:"重试间隔时间"},{default:n((()=>[v(a,{value:L.value.storage.github.retryAfter,"onUpdate:value":l[97]||(l[97]=e=>L.value.storage.github.retryAfter=e),placeholder:"输入重试次数，默认为 5 秒"},null,8,["value"])])),_:1}),v(u,{label:"开启自定义域名"},{default:n((()=>[v(d,{checked:L.value.storage.github.customDomain,"onUpdate:checked":l[98]||(l[98]=e=>L.value.storage.github.customDomain=e)},null,8,["checked"]),l[155]||(l[155]=m("p",null,"开启自定义域名后, 图片可访问状态以Github Pages build状态为准",-1))])),_:1,__:[155]}),L.value.storage.github.customDomain?(i(),b(u,{key:0,label:"是否Github Pages"},{default:n((()=>[v(d,{checked:L.value.storage.github.isGithubPages,"onUpdate:checked":l[99]||(l[99]=e=>L.value.storage.github.isGithubPages=e)},null,8,["checked"])])),_:1})):f("",!0),L.value.storage.github.customDomain&&!L.value.storage.github.isGithubPages?(i(),b(u,{key:1,required:"",label:"自定义域名"},{default:n((()=>[v(a,{value:L.value.storage.github.domain,"onUpdate:value":l[100]||(l[100]=e=>L.value.storage.github.domain=e),placeholder:"输入自定义域名, 例如: https://domain.com"},null,8,["value"])])),_:1})):f("",!0),L.value.storage.github.customDomain&&L.value.storage.github.isGithubPages?(i(),b(u,{key:2,required:"",label:"Github Pages"},{default:n((()=>[v(a,{value:L.value.storage.github.githubPages,"onUpdate:value":l[101]||(l[101]=e=>L.value.storage.github.githubPages=e),placeholder:"输入Github Pages, 例如: https://user.github.io"},null,8,["value"])])),_:1})):f("",!0)],64)):f("",!0)])),_:1}),v(R,{key:"4",header:"鉴黄设置"},{default:n((()=>[v(u,{label:"鉴黄开关"},{default:n((()=>[v(d,{checked:L.value.ai.enabled,"onUpdate:checked":l[102]||(l[102]=e=>L.value.ai.enabled=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"]),l[156]||(l[156]=m("p",null,"设置上传是否需要应用第三方审查，违规的图片会被标记为不健康的图片，或直接被删除。",-1))])),_:1,__:[156]}),v(u,{label:"自动拉黑"},{default:n((()=>[v(d,{checked:L.value.ai.autoBlack,"onUpdate:checked":l[103]||(l[103]=e=>L.value.ai.autoBlack=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"]),l[157]||(l[157]=m("p",null,"该功能需要同步弃用IP设置里的黑名单开关。设置之后用户如果上传违规图片，会被自动列入IP黑名单",-1))])),_:1,__:[157]}),L.value.ai.enabled?(i(),o(S,{key:0},[v(u,{label:"图片处理"},{default:n((()=>[v(W,{value:L.value.ai.action,"onUpdate:value":l[104]||(l[104]=e=>L.value.ai.action=e)},{default:n((()=>[v(J,{value:"reject"},{default:n((()=>l[158]||(l[158]=[w("标记为不健康")]))),_:1,__:[158]}),v(J,{value:"mark"},{default:n((()=>l[159]||(l[159]=[w("直接删除")]))),_:1,__:[159]})])),_:1},8,["value"])])),_:1}),v(u,{label:"图片审核"},{default:n((()=>[v(s,{value:L.value.ai.type,"onUpdate:value":l[105]||(l[105]=e=>L.value.ai.type=e)},{default:n((()=>[v(r,{value:"tencent"},{default:n((()=>l[160]||(l[160]=[w("腾讯云")]))),_:1,__:[160]}),v(r,{value:"aliyun"},{default:n((()=>l[161]||(l[161]=[w("阿里云")]))),_:1,__:[161]}),v(r,{value:"nsfwjs"},{default:n((()=>l[162]||(l[162]=[w("NsfwJs")]))),_:1,__:[162]})])),_:1},8,["value"])])),_:1}),"tencent"===L.value.ai.type?(i(),o(S,{key:0},[v(u,{required:"",label:"Endpoint"},{default:n((()=>[v(a,{value:L.value.ai.tencent.endpoint,"onUpdate:value":l[106]||(l[106]=e=>L.value.ai.tencent.endpoint=e),placeholder:"请输入 Endpoint"},null,8,["value"])])),_:1}),v(u,{required:"",label:"SecretId"},{default:n((()=>[v(a,{value:L.value.ai.tencent.secretId,"onUpdate:value":l[107]||(l[107]=e=>L.value.ai.tencent.secretId=e),placeholder:"请输入 SecretId"},null,8,["value"])])),_:1}),v(u,{required:"",label:"SecretKey"},{default:n((()=>[v($,{value:L.value.ai.tencent.secretKey,"onUpdate:value":l[108]||(l[108]=e=>L.value.ai.tencent.secretKey=e),placeholder:"请输入 SecretKey"},null,8,["value"])])),_:1}),v(u,{required:"",label:"地域"},{default:n((()=>[v(a,{value:L.value.ai.tencent.region,"onUpdate:value":l[109]||(l[109]=e=>L.value.ai.tencent.region=e),placeholder:"请输入地域节点，例如：ap-beijing"},null,8,["value"])])),_:1}),v(u,{label:"场景名称(Biztype名称)"},{default:n((()=>[v(a,{value:L.value.ai.tencent.bizType,"onUpdate:value":l[110]||(l[110]=e=>L.value.ai.tencent.bizType=e),placeholder:"业务场景名称，可为空"},null,8,["value"])])),_:1})],64)):f("",!0),"aliyun"===L.value.ai.type?(i(),o(S,{key:1},[v(u,{required:"",label:"AccessKeyId"},{default:n((()=>[v(a,{value:L.value.ai.aliyun.accessKeyId,"onUpdate:value":l[111]||(l[111]=e=>L.value.ai.aliyun.accessKeyId=e),placeholder:"请输入 AccessKeyId"},null,8,["value"])])),_:1}),v(u,{required:"",label:"AccessKeySecret"},{default:n((()=>[v($,{value:L.value.ai.aliyun.accessKeySecret,"onUpdate:value":l[112]||(l[112]=e=>L.value.ai.aliyun.accessKeySecret=e),placeholder:"请输入 AccessKeySecret"},null,8,["value"])])),_:1}),v(u,{required:"",label:"地域节点"},{default:n((()=>[v(a,{value:L.value.ai.aliyun.region,"onUpdate:value":l[113]||(l[113]=e=>L.value.ai.aliyun.region=e),placeholder:"请输入地域节点，例如：cn-shanghai"},null,8,["value"])])),_:1}),v(u,{required:"",label:"检测 Service"},{default:n((()=>[v(a,{value:L.value.ai.aliyun.service,"onUpdate:value":l[114]||(l[114]=e=>L.value.ai.aliyun.service=e),placeholder:"检测服务规则配置，示例：baselineCheck"},null,8,["value"])])),_:1}),v(u,{required:"",label:"阈值"},{default:n((()=>[v(Y,{value:L.value.ai.aliyun.threshold,"onUpdate:value":l[115]||(l[115]=e=>L.value.ai.aliyun.threshold=e),min:1,max:100,placeholder:"取值 1-100"},null,8,["value"]),l[163]||(l[163]=m("p",null,"阈值是指图片违规程度上限，取值 1-100 之间，数值越低审核越严格",-1))])),_:1,__:[163]})],64)):f("",!0),"nsfwjs"===L.value.ai.type?(i(),o(S,{key:2},[v(u,{required:"",label:"接口地址"},{default:n((()=>[v(a,{value:L.value.ai.nsfwjs.apiUrl,"onUpdate:value":l[116]||(l[116]=e=>L.value.ai.nsfwjs.apiUrl=e),placeholder:"请输入接口地址，http(s)://domain.com/classify"},null,8,["value"])])),_:1}),v(u,{required:"",label:"阈值"},{default:n((()=>[v(Y,{value:L.value.ai.nsfwjs.threshold,"onUpdate:value":l[117]||(l[117]=e=>L.value.ai.nsfwjs.threshold=e),min:1,max:100,placeholder:"取值 1-100"},null,8,["value"]),l[164]||(l[164]=m("p",null,"阈值是指图片违规程度上限，取值 1-100 之间，数值越低审核越严格",-1))])),_:1,__:[164]})],64)):f("",!0)],64)):f("",!0)])),_:1}),v(R,{key:"5",header:"IP设置"},{default:n((()=>[v(u,{label:"黑名单开关"},{default:n((()=>[v(d,{checked:L.value.ip.enabled,"onUpdate:checked":l[118]||(l[118]=e=>L.value.ip.enabled=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),v(u,{label:"IP黑名单"},{default:n((()=>[v(t,{value:H.value,"onUpdate:value":l[119]||(l[119]=e=>H.value=e),rows:4,placeholder:"每行一个IP地址",onChange:N},null,8,["value"])])),_:1})])),_:1}),v(R,{key:"6",header:"社会化登录"},{default:n((()=>[v(u,{label:"启用社会化登录"},{default:n((()=>[v(d,{checked:L.value.oauth.enabled,"onUpdate:checked":l[120]||(l[120]=e=>L.value.oauth.enabled=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),L.value.oauth.enabled?(i(),o(S,{key:0},[v(u,{label:"GitHub登录开关"},{default:n((()=>[v(d,{checked:L.value.oauth.github.enabled,"onUpdate:checked":l[121]||(l[121]=e=>L.value.oauth.github.enabled=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),L.value.oauth.github.enabled?(i(),o(S,{key:0},[v(u,{required:"",label:"Client ID"},{default:n((()=>[v(a,{value:L.value.oauth.github.clientId,"onUpdate:value":l[122]||(l[122]=e=>L.value.oauth.github.clientId=e),placeholder:"输入 GitHub Client ID"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Client Secret"},{default:n((()=>[v($,{value:L.value.oauth.github.clientSecret,"onUpdate:value":l[123]||(l[123]=e=>L.value.oauth.github.clientSecret=e),placeholder:"输入 GitHub Client Secret"},null,8,["value"])])),_:1}),v(u,{label:"回调地址"},{default:n((()=>[v(a,{value:`${L.value.site.url}${L.value.oauth.github.callbackUrl}`,disabled:"",placeholder:"输入回调地址"},null,8,["value"])])),_:1})],64)):f("",!0),v(u,{label:"Google登录开关"},{default:n((()=>[v(d,{checked:L.value.oauth.google.enabled,"onUpdate:checked":l[124]||(l[124]=e=>L.value.oauth.google.enabled=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),L.value.oauth.google.enabled?(i(),o(S,{key:1},[v(u,{required:"",label:"Client ID"},{default:n((()=>[v(a,{value:L.value.oauth.google.clientId,"onUpdate:value":l[125]||(l[125]=e=>L.value.oauth.google.clientId=e),placeholder:"输入 Google Client ID"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Client Secret"},{default:n((()=>[v($,{value:L.value.oauth.google.clientSecret,"onUpdate:value":l[126]||(l[126]=e=>L.value.oauth.google.clientSecret=e),placeholder:"输入 Google Client Secret"},null,8,["value"])])),_:1}),v(u,{label:"回调地址"},{default:n((()=>[v(a,{value:`${L.value.site.url}${L.value.oauth.google.callbackUrl}`,disabled:"",placeholder:"输入回调地址"},null,8,["value"])])),_:1})],64)):f("",!0),v(u,{label:"Linux DO登录开关"},{default:n((()=>[v(d,{checked:L.value.oauth.linuxdo.enabled,"onUpdate:checked":l[127]||(l[127]=e=>L.value.oauth.linuxdo.enabled=e),"checked-children":"启用","un-checked-children":"禁用"},null,8,["checked"])])),_:1}),L.value.oauth.linuxdo.enabled?(i(),o(S,{key:2},[v(u,{required:"",label:"Client ID"},{default:n((()=>[v(a,{value:L.value.oauth.linuxdo.clientId,"onUpdate:value":l[128]||(l[128]=e=>L.value.oauth.linuxdo.clientId=e),placeholder:"输入 Linux DO Client ID"},null,8,["value"])])),_:1}),v(u,{required:"",label:"Client Secret"},{default:n((()=>[v($,{value:L.value.oauth.linuxdo.clientSecret,"onUpdate:value":l[129]||(l[129]=e=>L.value.oauth.linuxdo.clientSecret=e),placeholder:"输入 Linux DO Client Secret"},null,8,["value"])])),_:1}),v(u,{label:"回调地址"},{default:n((()=>[v(a,{value:`${L.value.site.url}${L.value.oauth.linuxdo.callbackUrl}`,disabled:"",placeholder:"输入回调地址"},null,8,["value"])])),_:1})],64)):f("",!0)],64)):f("",!0)])),_:1})])),_:1},8,["activeKey"]),v(u,null,{default:n((()=>[v(X,{type:"primary","html-type":"submit",loading:M.value},{default:n((()=>l[165]||(l[165]=[w("保存设置")]))),_:1,__:[165]},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1},8,["spinning"])])}}},[["__scopeId","data-v-05815321"]]);export{R as default};
